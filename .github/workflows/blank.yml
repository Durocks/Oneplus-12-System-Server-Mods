name: CI

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - name: Run a one-line script
        run: echo Hello, world!

      - name: Run a multi-line script
        run: |
          echo Add other actions to build,
          echo test, and deploy your project.

      # Step to create metadata file
      - name: Create Metadata File
        run: |
          echo "Generated by GitHub Actions" > metadata.txt
          echo "Run ID: ${{ github.run_id }}" >> metadata.txt
          echo "Commit SHA: ${{ github.sha }}" >> metadata.txt
          echo "Timestamp: $(date)" >> metadata.txt

      # Step to create a ZIP file of the project and metadata
      - name: Create ZIP file with unique name
        run: |
          zip_file_name="Oneplus.12.System.Server.Mods.v1.0-${{ github.run_id }}.zip"
          zip -r $zip_file_name ./* metadata.txt
          
      # Optional: Upload the ZIP file as an artifact
      - name: Upload ZIP file
        uses: actions/upload-artifact@v3
        with:
          name: Oneplus.12.System.Server.Mods.v1.0
          path: Oneplus.12.System.Server.Mods.v1.0.zip
